(function(e){function t(t){for(var n,a,i=t[0],s=t[1],l=t[2],d=0,f=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(f.length)f.shift()();return c.push.apply(c,l||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,i=1;i<r.length;i++){var s=r[i];0!==o[s]&&(n=!1)}n&&(c.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},o={app:0},c=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"23b1":function(e,t,r){"use strict";r("46ec")},"46ec":function(e,t,r){},"5f08":function(e,t,r){"use strict";r("d2cd")},a8fb:function(e,t,r){"use strict";r("c614")},c614:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),o=(r("fb6a"),{id:"title",class:"center-content"}),c=Object(n["f"])("span",null,null,-1),a={class:"center-text"},i=Object(n["f"])("span",null,null,-1),s={class:"center-content p-5P relative column",style:{"padding-bottom":"1rem"}},l={id:"upload-wrapper",class:"center-content column p-5P rounded"},u=Object(n["f"])("h3",{style:{"text-align":"center",color:"hsl(202, 12%, 73%)"}}," Upload image of any food item ",-1),d={id:"custom-input"},f=["accept"],b={for:"food-img",id:"food-img-upload",class:"center-content"},p={class:"p-5P"},m={key:0,class:"center-content alert"};function h(e,t){var r=Object(n["n"])("view-modal"),h=Object(n["n"])("analyse-image");return Object(n["h"])(),Object(n["e"])(n["a"],null,[Object(n["f"])("span",o,[c,Object(n["f"])("div",a,[Object(n["f"])("h1",null,Object(n["o"])(e.title[0].toUpperCase()),1),Object(n["f"])("h3",null,Object(n["o"])(e.title.slice(1,e.title.length)),1)]),i]),Object(n["f"])("div",s,[Object(n["f"])("div",l,[u,Object(n["f"])("div",d,[Object(n["f"])("input",{onChange:t[0]||(t[0]=function(t){return e.uploadState()}),type:"file",name:"food-img",id:"food-img",hidden:"","aria-hidden":"true",accept:e.fileExtensions,ref:"foodImg"},null,40,f),Object(n["f"])("label",b,Object(n["o"])(e.labelState),1),Object(n["f"])("p",null,Object(n["o"])(e.fileString),1)]),Object(n["f"])("div",{onClick:t[1]||(t[1]=function(){return e.resetUpload&&e.resetUpload.apply(e,arguments)}),class:"theme-btn bot-rounded center-content",style:{padding:"0.4rem","font-size":"0.85rem"}}," Clear Upload "),Object(n["f"])("div",p,[Object(n["f"])("button",{onClick:t[2]||(t[2]=function(){return e.showModal&&e.showModal.apply(e,arguments)}),class:"theme-btn rounded",style:{padding:"0.4rem 0.5rem"}}," View Image ")])]),e.error?(Object(n["h"])(),Object(n["e"])("div",m,[Object(n["f"])("span",null,Object(n["o"])(e.errorText),1),Object(n["f"])("span",{class:"closebtn rounded",onClick:t[3]||(t[3]=function(){return e.closeError&&e.closeError.apply(e,arguments)})},"Ã—")])):Object(n["d"])("",!0)]),e.modalView?(Object(n["h"])(),Object(n["c"])(r,{key:0,onClose:e.showModal,imgSrc:e.imgSrc,srcAdded:e.srcAdded},null,8,["onClose","imgSrc","srcAdded"])):Object(n["d"])("",!0),e.srcAdded?(Object(n["h"])(),Object(n["c"])(h,{key:1,imgFile:e.imageFile,imgSrc:e.imgSrc,srcAdded:e.srcAdded,bearer:e.Bearer},null,8,["imgFile","imgSrc","srcAdded","bearer"])):Object(n["d"])("",!0)],64)}var O=r("1da1"),j=r("d4ec"),g=r("bee2"),v=r("262e"),y=r("2caf"),w=(r("96cf"),r("d3b7"),r("b0c0"),r("25f0"),r("ac1f"),r("1276"),r("9ab4")),S=r("ce1f"),k=function(e){return Object(n["k"])("data-v-776b2930"),e=e(),Object(n["i"])(),e},x={id:"modal-wrapper",class:"center-content column rounded"},A=k((function(){return Object(n["f"])("div",{id:"modal-header",class:"center-content"},[Object(n["f"])("p",null,"Image Preview")],-1)})),I={id:"modal-body",class:"center-content"},M=["src"],F={key:1},P={id:"modal-footer"};function E(e,t,r,o,c,a){return Object(n["h"])(),Object(n["e"])("div",x,[A,Object(n["f"])("div",I,[e.srcAdded?(Object(n["h"])(),Object(n["e"])("img",{key:0,src:e.imgSrc,alt:"Image"},null,8,M)):(Object(n["h"])(),Object(n["e"])("p",F,"No image was uploaded"))]),Object(n["f"])("div",P,[Object(n["f"])("button",{onClick:t[0]||(t[0]=function(){return e.closeModal&&e.closeModal.apply(e,arguments)})},"Close")])])}var C=function(e){Object(v["a"])(r,e);var t=Object(y["a"])(r);function r(){return Object(j["a"])(this,r),t.apply(this,arguments)}return Object(g["a"])(r,[{key:"closeModal",value:function(){this.$emit("close")}}]),r}(S["b"]);C=Object(w["a"])([Object(S["a"])({props:{imgSrc:String,srcAdded:Boolean}})],C);var R=C,N=(r("a8fb"),r("6b0d")),D=r.n(N);const T=D()(R,[["render",E],["__scopeId","data-v-776b2930"]]);var U=T,_=function(e){return Object(n["k"])("data-v-79f20ed6"),e=e(),Object(n["i"])(),e},B={class:"center-content"},V={key:1,id:"modal-wrapper",class:"center-content column rounded"},L=_((function(){return Object(n["f"])("div",{id:"modal-header",class:"center-content"},[Object(n["f"])("p",null,"Image Results")],-1)})),q={id:"modal-body",class:"center-content column"},J={key:0,type:"1",class:"center-content column",style:{padding:"0.5rem",position:"absolute",top:"0",right:"0",left:"0"}},$=["src"],z=Object(n["g"])(" The image corresponds to the following dishes: "),H=_((function(){return Object(n["f"])("hr",null,null,-1)})),X={type:"1",style:{width:"90%"}},G={key:1,class:"center-content",style:{"text-align":"center",padding:"0.5rem"}},K={key:2,id:"loading"},Q={id:"modal-footer"};function W(e,t){return Object(n["h"])(),Object(n["e"])("div",B,[e.srcAdded?(Object(n["h"])(),Object(n["e"])("button",{key:0,onClick:t[0]||(t[0]=function(t){return e.setData(e.imgFile,e.bearer)}),class:"theme-btn rounded",style:{padding:"0.4rem 0.5rem"}}," Detect Food Item ")):Object(n["d"])("",!0),e.modalView?(Object(n["h"])(),Object(n["e"])("div",V,[L,Object(n["f"])("div",q,[e.requestStatus&&!e.isListEmpty?(Object(n["h"])(),Object(n["e"])("div",J,[Object(n["f"])("img",{src:e.imgSrc,alt:"image",style:{"max-width":"90%",padding:"1rem"}},null,8,$),z,H,Object(n["f"])("ul",X,[(Object(n["h"])(!0),Object(n["e"])(n["a"],null,Object(n["m"])(e.nameOfDishes,(function(e){return Object(n["h"])(),Object(n["e"])("li",{key:e.name,style:{"word-break":"break-word"}},Object(n["o"])(e.name),1)})),128))])])):Object(n["d"])("",!0),e.requestStatus&&e.isListEmpty?(Object(n["h"])(),Object(n["e"])("div",G,[Object(n["f"])("p",null,Object(n["o"])(e.error),1)])):Object(n["d"])("",!0),e.loading?(Object(n["h"])(),Object(n["e"])("div",K)):Object(n["d"])("",!0)]),Object(n["f"])("div",Q,[Object(n["f"])("button",{onClick:t[1]||(t[1]=function(){return e.closeModal&&e.closeModal.apply(e,arguments)})},"Close")])])):Object(n["d"])("",!0)])}var Y=function(e){Object(v["a"])(r,e);var t=Object(y["a"])(r);function r(){var e;return Object(j["a"])(this,r),e=t.apply(this,arguments),e.modalView=!1,e.loading=!1,e.Bearer="",e.requestStatus=!1,e.isListEmpty=!0,e.nameOfDishes=[],e.error="",e}return Object(g["a"])(r,[{key:"analyseImageFromLogmeal",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var o=new XMLHttpRequest,c=new FormData;c.append("image",t),o.onload=function(){e({results:JSON.parse(o.responseText).recognition_results,object:JSON.parse(o.responseText)})},o.onerror=function(){n({results:[],object:JSON.parse(o.responseText)})},o.onabort=function(){n({results:[],object:JSON.parse(o.responseText)})},o.open("POST","https://api.logmeal.es/v2/recognition/dish"),o.setRequestHeader("Authorization",r.toString()),o.send(c)})));case 1:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"analyseImage",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.requestStatus=!1,e.next=4,this.analyseImageFromLogmeal(this.imageFile,this.Bearer).then((function(e){return e}),(function(e){return e}));case 4:t=e.sent,void 0!=t.results&&0!=t.results.length?this.isListEmpty=!1:this.isListEmpty=!0,this.nameOfDishes=t.results,this.requestStatus=!0,void 0==t.results&&(console.log(t),void 0!=t.object.message?this.error=t.object.message:this.error="Some error occurred"),this.loading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setData",value:function(e,t){this.imageFile=e,this.Bearer=t,this.showModal()}},{key:"showModal",value:function(){this.modalView=!0,this.analyseImage()}},{key:"getBearer",value:function(){return this.Bearer}},{key:"closeModal",value:function(){this.modalView=!1}}]),r}(S["b"]);Y=Object(w["a"])([Object(S["a"])({props:{imgSrc:String,imgFile:File,srcAdded:Boolean,bearer:String}})],Y);var Z=Y;r("23b1");const ee=D()(Z,[["render",W],["__scopeId","data-v-79f20ed6"]]);var te=ee,re=function(e){Object(v["a"])(r,e);var t=Object(y["a"])(r);function r(){var e;return Object(j["a"])(this,r),e=t.apply(this,arguments),e.title="Food Detector",e.fileExtensions="image/*",e.labelState="Upload Image",e.fileString="No file has been selected",e.imgSrc="",e.srcAdded=!1,e.modalView=!1,e.error=!1,e.errorText="No Errors",e.Bearer="Bearer c596d7293255a043c3bfbea974432951f5b4462a",e}return Object(g["a"])(r,[{key:"getFileData",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.foodImg.files[0],this.imageFile=t,e.abrupt("return",new Promise((function(e,r){if(t){var n=new FileReader;n.onload=function(){e({result:this.result,name:t.name,type:t.type})},n.onerror=function(){r({result:"",name:"No file has been selected",type:""})},n.onabort=function(){r({result:"",name:"No file has been selected",type:""})},n.readAsDataURL(t)}})));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"uploadState",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getFileData().then((function(e){return e}),(function(e){return e}));case 2:t=e.sent,this.imgSrc=t.result,""!=this.imgSrc&&/^image\/jpg|jpeg/gm.test(t.type.toString())?(this.fileString=t.name,this.labelState="Image Uploaded",this.srcAdded=!0):(this.imgSrc="",this.fileString="No file has been selected",this.labelState="Upload Image",this.srcAdded=!1,this.setError("Please select an image of type jpg/jpeg not ("+t.type.split("/")[1]+" file)"));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setError",value:function(e){this.errorText=e,this.error=!0}},{key:"resetUpload",value:function(){0!=this.srcAdded?(this.imgSrc="",this.fileString="No file has been selected",this.labelState="Upload Image",this.srcAdded=!1,this.$refs.foodImg.value=""):this.setError("No image was uploaded")}},{key:"closeError",value:function(){this.error=!1}},{key:"showModal",value:function(){this.modalView=!this.modalView}}]),r}(S["b"]);re=Object(w["a"])([Object(S["a"])({components:{ViewModal:U,AnalyseImage:te}})],re);var ne=re;r("5f08");const oe=D()(ne,[["render",h]]);var ce=oe;Object(n["b"])(ce).mount("#app")},d2cd:function(e,t,r){}});
//# sourceMappingURL=app.9169ee74.js.map