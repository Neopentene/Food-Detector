(function(e){function t(t){for(var n,c,i=t[0],s=t[1],l=t[2],d=0,f=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var s=r[i];0!==a[s]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},o=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"89e1":function(e,t,r){},"8efb":function(e,t,r){"use strict";r("ee95")},cab6:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),a=(r("fb6a"),{id:"title",class:"center-content"}),o=Object(n["f"])("span",null,null,-1),c={class:"center-text"},i=Object(n["f"])("span",null,null,-1),s={class:"center-content p-5P relative column",style:{"padding-bottom":"1rem"}},l={id:"upload-wrapper",class:"center-content column p-5P rounded"},u=Object(n["f"])("h3",{style:{"text-align":"center",color:"hsl(202, 12%, 73%)"}}," Upload image of any food item ",-1),d={id:"custom-input"},f=["accept"],b={for:"food-img",id:"food-img-upload",class:"center-content"},p={class:"p-5P"},m={key:0,class:"center-content alert"};function h(e,t){var r=Object(n["n"])("view-modal"),h=Object(n["n"])("analyse-image");return Object(n["h"])(),Object(n["e"])(n["a"],null,[Object(n["f"])("span",a,[o,Object(n["f"])("div",c,[Object(n["f"])("h1",null,Object(n["o"])(e.title[0].toUpperCase()),1),Object(n["f"])("h3",null,Object(n["o"])(e.title.slice(1,e.title.length)),1)]),i]),Object(n["f"])("div",s,[Object(n["f"])("div",l,[u,Object(n["f"])("div",d,[Object(n["f"])("input",{onChange:t[0]||(t[0]=function(t){return e.uploadState()}),type:"file",name:"food-img",id:"food-img",hidden:"","aria-hidden":"true",accept:e.fileExtensions,ref:"foodImg"},null,40,f),Object(n["f"])("label",b,Object(n["o"])(e.labelState),1),Object(n["f"])("p",null,Object(n["o"])(e.fileString),1)]),Object(n["f"])("div",{onClick:t[1]||(t[1]=function(){return e.resetUpload&&e.resetUpload.apply(e,arguments)}),class:"theme-btn bot-rounded center-content",style:{padding:"0.4rem","font-size":"0.85rem"}}," Clear Upload "),Object(n["f"])("div",p,[Object(n["f"])("button",{onClick:t[2]||(t[2]=function(){return e.showModal&&e.showModal.apply(e,arguments)}),class:"theme-btn rounded",style:{padding:"0.4rem 0.5rem"}}," View Image ")])]),e.error?(Object(n["h"])(),Object(n["e"])("div",m,[Object(n["f"])("span",null,Object(n["o"])(e.errorText),1),Object(n["f"])("span",{class:"closebtn rounded",onClick:t[3]||(t[3]=function(){return e.closeError&&e.closeError.apply(e,arguments)})},"Ã—")])):Object(n["d"])("",!0)]),e.modalView?(Object(n["h"])(),Object(n["c"])(r,{key:0,onClose:e.showModal,imgSrc:e.imgSrc,srcAdded:e.srcAdded},null,8,["onClose","imgSrc","srcAdded"])):Object(n["d"])("",!0),e.srcAdded?(Object(n["h"])(),Object(n["c"])(h,{key:1,imgFile:e.imageFile,imgSrc:e.imgSrc,srcAdded:e.srcAdded,bearer:e.Bearer},null,8,["imgFile","imgSrc","srcAdded","bearer"])):Object(n["d"])("",!0)],64)}var g=r("1da1"),O=r("d4ec"),j=r("bee2"),v=r("262e"),y=r("2caf"),w=(r("96cf"),r("d3b7"),r("b0c0"),r("25f0"),r("ac1f"),r("1276"),r("9ab4")),S=r("ce1f"),k=function(e){return Object(n["k"])("data-v-4d08ad30"),e=e(),Object(n["i"])(),e},x={class:"popUp-wrapper center-content"},I={id:"modal-wrapper",class:"center-content column rounded"},F=k((function(){return Object(n["f"])("div",{id:"modal-header",class:"center-content"},[Object(n["f"])("p",null,"Image Preview")],-1)})),A={id:"modal-body",class:"center-content"},M=["src"],E={key:1},P={id:"modal-footer"};function R(e,t,r,a,o,c){return Object(n["h"])(),Object(n["e"])("div",x,[Object(n["f"])("div",I,[F,Object(n["f"])("div",A,[e.srcAdded?(Object(n["h"])(),Object(n["e"])("img",{key:0,src:e.imgSrc,alt:"Image"},null,8,M)):(Object(n["h"])(),Object(n["e"])("p",E,"No image was uploaded"))]),Object(n["f"])("div",P,[Object(n["f"])("button",{onClick:t[0]||(t[0]=function(){return e.closeModal&&e.closeModal.apply(e,arguments)})},"Close")])])])}var U=function(e){Object(v["a"])(r,e);var t=Object(y["a"])(r);function r(){return Object(O["a"])(this,r),t.apply(this,arguments)}return Object(j["a"])(r,[{key:"closeModal",value:function(){this.$emit("close")}}]),r}(S["b"]);U=Object(w["a"])([Object(S["a"])({props:{imgSrc:String,srcAdded:Boolean}})],U);var C=U,D=(r("d646"),r("6b0d")),N=r.n(D);const B=N()(C,[["render",R],["__scopeId","data-v-4d08ad30"]]);var T=B,_=function(e){return Object(n["k"])("data-v-24954cc3"),e=e(),Object(n["i"])(),e},V={class:"center-content"},L={key:1,class:"popUp-wrapper center-content"},q={id:"modal-wrapper",class:"center-content column rounded"},J=_((function(){return Object(n["f"])("div",{id:"modal-header",class:"center-content"},[Object(n["f"])("p",null,"Image Results")],-1)})),z={id:"modal-body",class:"center-content column"},H={key:0,type:"1",class:"center-content column",style:{padding:"0.5rem",position:"absolute",top:"0",right:"0",left:"0"}},$=["src"],W=Object(n["g"])(" The image corresponds to the following dishes: "),X=_((function(){return Object(n["f"])("hr",null,null,-1)})),G={type:"1",style:{width:"90%"}},K={key:1,class:"center-content",style:{"text-align":"center",padding:"0.5rem"}},Q={key:2,id:"loading"},Y={id:"modal-footer"};function Z(e,t){return Object(n["h"])(),Object(n["e"])("div",V,[e.srcAdded?(Object(n["h"])(),Object(n["e"])("button",{key:0,onClick:t[0]||(t[0]=function(t){return e.setData(e.imgFile,e.bearer)}),class:"theme-btn rounded",style:{padding:"0.4rem 0.5rem"}}," Detect Food Item ")):Object(n["d"])("",!0),e.modalView?(Object(n["h"])(),Object(n["e"])("div",L,[Object(n["f"])("div",q,[J,Object(n["f"])("div",z,[e.requestStatus&&!e.isListEmpty?(Object(n["h"])(),Object(n["e"])("div",H,[Object(n["f"])("img",{src:e.imgSrc,alt:"image",style:{"max-width":"90%",padding:"1rem"}},null,8,$),W,X,Object(n["f"])("ul",G,[(Object(n["h"])(!0),Object(n["e"])(n["a"],null,Object(n["m"])(e.nameOfDishes,(function(e){return Object(n["h"])(),Object(n["e"])("li",{key:e.name,style:{"word-break":"break-word"}},Object(n["o"])(e.name),1)})),128))])])):Object(n["d"])("",!0),e.requestStatus&&e.isListEmpty?(Object(n["h"])(),Object(n["e"])("div",K,[Object(n["f"])("p",null,Object(n["o"])(e.error),1)])):Object(n["d"])("",!0),e.loading?(Object(n["h"])(),Object(n["e"])("div",Q)):Object(n["d"])("",!0)]),Object(n["f"])("div",Y,[Object(n["f"])("button",{onClick:t[1]||(t[1]=function(){return e.closeModal&&e.closeModal.apply(e,arguments)})},"Close")])])])):Object(n["d"])("",!0)])}var ee=function(e){Object(v["a"])(r,e);var t=Object(y["a"])(r);function r(){var e;return Object(O["a"])(this,r),e=t.apply(this,arguments),e.modalView=!1,e.loading=!1,e.Bearer="",e.requestStatus=!1,e.isListEmpty=!0,e.nameOfDishes=[],e.error="",e}return Object(j["a"])(r,[{key:"analyseImageFromLogmeal",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new XMLHttpRequest,o=new FormData;o.append("image",t),a.onload=function(){e({results:JSON.parse(a.responseText).recognition_results,object:JSON.parse(a.responseText)})},a.onerror=function(){n({results:[],object:JSON.parse(a.responseText)})},a.onabort=function(){n({results:[],object:JSON.parse(a.responseText)})},a.open("POST","https://api.logmeal.es/v2/recognition/dish"),a.setRequestHeader("Authorization",r.toString()),a.send(o)})));case 1:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"analyseImage",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.requestStatus=!1,e.next=4,this.analyseImageFromLogmeal(this.imageFile,this.Bearer).then((function(e){return e}),(function(e){return e}));case 4:t=e.sent,void 0!=t.results&&0!=t.results.length?this.isListEmpty=!1:this.isListEmpty=!0,this.nameOfDishes=t.results,this.requestStatus=!0,void 0==t.results&&(void 0!=t.object.message?this.error=t.object.message:this.error="Some error occurred"),this.loading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setData",value:function(e,t){this.imageFile=e,this.Bearer=t,this.showModal()}},{key:"showModal",value:function(){this.modalView=!0,this.analyseImage()}},{key:"getBearer",value:function(){return this.Bearer}},{key:"closeModal",value:function(){this.modalView=!1}}]),r}(S["b"]);ee=Object(w["a"])([Object(S["a"])({props:{imgSrc:String,imgFile:File,srcAdded:Boolean,bearer:String}})],ee);var te=ee;r("8efb");const re=N()(te,[["render",Z],["__scopeId","data-v-24954cc3"]]);var ne=re,ae=function(e){Object(v["a"])(r,e);var t=Object(y["a"])(r);function r(){var e;return Object(O["a"])(this,r),e=t.apply(this,arguments),e.title="Food Detector",e.fileExtensions="image/*",e.labelState="Upload Image",e.fileString="No file has been selected",e.imgSrc="",e.srcAdded=!1,e.modalView=!1,e.error=!1,e.errorText="No Errors",e.Bearer="Bearer c596d7293255a043c3bfbea974432951f5b4462a",e}return Object(j["a"])(r,[{key:"getFileData",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.foodImg.files[0],e.abrupt("return",new Promise((function(e,r){if(t){var n=new FileReader;n.onload=function(){e({result:this.result,name:t.name,type:t.type,file:t})},n.onerror=function(){r({result:"",name:"No file has been selected",type:"",file:null})},n.onabort=function(){r({result:"",name:"No file has been selected",type:"",file:null})},n.readAsDataURL(t)}})));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"uploadState",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getFileData().then((function(e){return e}),(function(e){return e}));case 2:if(t=e.sent,this.imgSrc=t.result,""==this.imgSrc||!/^image\//gm.test(t.type.toString())){e.next=23;break}return this.fileString=t.name,e.prev=6,e.next=9,this.compressOrSetImageFile(t).then((function(e){return e}),(function(){throw"Some error occurred"}));case 9:this.imageFile=e.sent,e.next=19;break;case 12:throw e.prev=12,e.t0=e["catch"](6),this.fileString="No file has been selected",this.labelState="Upload Image",this.srcAdded=!1,this.setError("The Uploaded File seems to be corrupted or incorrect"),e.t0;case 19:this.labelState="Image Uploaded",this.srcAdded=!0,e.next=28;break;case 23:this.imgSrc="",this.fileString="No file has been selected",this.labelState="Upload Image",this.srcAdded=!1,this.setError("Please select an image not ("+t.type.split("/")[1]+" file)");case 28:case"end":return e.stop()}}),e,this,[[6,12]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"compressOrSetImageFile",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=document.createElement("img"),a=t.result.toString();n.onload=function(){var r,a=document.createElement("canvas");a.height=n.naturalHeight,a.width=n.naturalWidth;var o=a.getContext("2d");o.drawImage(n,0,0);var c=void 0!=(null===(r=t.file)||void 0===r?void 0:r.size)&&t.file.size>1e6?1e6/t.file.size:.7;a.toBlob((function(t){var r=new File([t||new Blob],"image.jpeg",{type:"image/jpeg",lastModified:(new Date).getDate()});e(r)}),"image/jpeg",c)},n.onerror=function(){r()},n.onabort=function(){r()},n.src=a})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setError",value:function(e){this.errorText=e,this.error=!0}},{key:"resetUpload",value:function(){0!=this.srcAdded?(this.imgSrc="",this.fileString="No file has been selected",this.labelState="Upload Image",this.srcAdded=!1,this.$refs.foodImg.value=""):this.setError("No image was uploaded")}},{key:"closeError",value:function(){this.error=!1}},{key:"showModal",value:function(){this.modalView=!this.modalView}}]),r}(S["b"]);ae=Object(w["a"])([Object(S["a"])({components:{ViewModal:T,AnalyseImage:ne}})],ae);var oe=ae;r("f1ce");const ce=N()(oe,[["render",h]]);var ie=ce;Object(n["b"])(ie).mount("#app")},d646:function(e,t,r){"use strict";r("cab6")},ee95:function(e,t,r){},f1ce:function(e,t,r){"use strict";r("89e1")}});
//# sourceMappingURL=app.e970c584.js.map